{"ast":null,"code":"import _defineProperty from\"/Users/ucheuba/Downloads/backend/frontend/FP_Frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/ucheuba/Downloads/backend/frontend/FP_Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ucheuba/Downloads/backend/frontend/FP_Frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/ucheuba/Downloads/backend/frontend/FP_Frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/ucheuba/Downloads/backend/frontend/FP_Frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/ucheuba/Downloads/backend/frontend/FP_Frontend/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import DeckGL from'@deck.gl/react';import{LineLayer,GeoJsonLayer,ScatterplotLayer,PolygonLayer}from'@deck.gl/layers';import{StaticMap}from\"react-map-gl\";import ReactMapGL from\"react-map-gl\";import{MapView,View}from'@deck.gl/core';import{scaleThreshold}from'd3-scale';// github example\nimport\"./Map.css\";import{LayerControls,SCATTERPLOT_CONTROLS}from'./controls';import Precinct from'../../precinct.json';var MAPBOX_ACCESS_TOKEN='pk.eyJ1IjoidWJhY2hyaXMiLCJhIjoiY2sxYjczdWhpMGZuMzNjb2I5OGlqb3gwaCJ9.iLrtxaVXfhsJM0iyWwdQ5Q';var mapStyle=\"mapbox://styles/mapbox/outdoors-v11\";// Information from the github deckGL geoGSON example \nvar DATA_URL='https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/geojson/vancouver-blocks.json';// eslint-disable-line\nexport var COLOR_SCALE=scaleThreshold().domain([-0.6,-0.45,-0.3,-0.15,0,0.15,0.3,0.45,0.6,0.75,0.9,1.05,1.2]).range([[65,182,196],[127,205,187],[199,233,180],[237,248,177],// zero\n[255,255,204],[255,237,160],[254,217,118],[254,178,76],[253,141,60],[252,78,42],[227,26,28],[189,0,38],[128,0,38]]);// end of info \nvar initialViewState={// latitude: 49.254,\n// longitude: -123.13,\nlatitude:32.92,//SAN DIEGO\nlongitude:-117.135,zoom:14,pitch:0,bearing:0};// console.log(precinctData)\nvar geoJsonData={\"type\":\"FeatureCollection\",\"features\":[{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.131861,32.920173]},\"type\":\"Feature\",\"properties\":{\"cluster\":3,\"Address\":\"8990 BRENTFORD AVE\",\"Name\":\"Lavinnia  Sweigart\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.133607,32.920137]},\"type\":\"Feature\",\"properties\":{\"cluster\":4,\"Address\":\"8880 BRENTFORD AVE\",\"Name\":\"Mercedese Irmgard Thero\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.132555,32.920159]},\"type\":\"Feature\",\"properties\":{\"cluster\":1,\"Address\":\"8950 BRENTFORD AVE\",\"Name\":\"Denkevitz  Rener\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.132507,32.920452]},\"type\":\"Feature\",\"properties\":{\"cluster\":1,\"Address\":\"8969 LIBRA DR\",\"Name\":\"Assent  Gantvoort\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.132834,32.920445]},\"type\":\"Feature\",\"properties\":{\"cluster\":1,\"Address\":\"8953 LIBRA DR\",\"Name\":\"Keuna  Malmgren\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.13517,32.920105]},\"type\":\"Feature\",\"properties\":{\"cluster\":0,\"Address\":\"8776 BRENTFORD AVE\",\"Name\":\"Jimyah  Wokwicz\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.133653,32.920426]},\"type\":\"Feature\",\"properties\":{\"cluster\":4,\"Address\":\"8921 LIBRA DR\",\"Name\":\"Cannette  Mahalick\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.134128,32.920126]},\"type\":\"Feature\",\"properties\":{\"cluster\":2,\"Address\":\"8850 BRENTFORD AVE\",\"Name\":\"Liliya  Rallison\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.13267,32.920449]},\"type\":\"Feature\",\"properties\":{\"cluster\":1,\"Address\":\"8961 LIBRA DR\",\"Name\":\"Fugate  Standerwick\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.133607,32.920137]},\"type\":\"Feature\",\"properties\":{\"cluster\":4,\"Address\":\"8880 BRENTFORD AVE\",\"Name\":\"Yeicob  Domingues\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.135138,32.920393]},\"type\":\"Feature\",\"properties\":{\"cluster\":0,\"Address\":\"8777 LIBRA DR\",\"Name\":\"Nayya  Drouillard\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.134475,32.920407]},\"type\":\"Feature\",\"properties\":{\"cluster\":5,\"Address\":\"8845 LIBRA DR\",\"Name\":\"Tammeka  Piazza\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.133953,32.920131]},\"type\":\"Feature\",\"properties\":{\"cluster\":2,\"Address\":\"8860 BRENTFORD AVE\",\"Name\":\"Quintoria  Reigle\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.135002,32.920108]},\"type\":\"Feature\",\"properties\":{\"cluster\":0,\"Address\":\"8786 BRENTFORD AVE\",\"Name\":\"D\\u017Eemila  Denny\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.13267,32.920449]},\"type\":\"Feature\",\"properties\":{\"cluster\":1,\"Address\":\"8961 LIBRA DR\",\"Name\":\"Erlon  Willison\",\"zipcode\":130960}},{\"geometry\":{\"type\":\"Point\",\"coordinates\":[-117.133256,32.920144]},\"type\":\"Feature\",\"properties\":{\"cluster\":6,\"Address\":\"8910 BRENTFORD AVE\",\"Name\":\"Vedvit  Swerdlow\",\"zipcode\":130960}}]};var tooltipStyle={position:'absolute',padding:'4px',background:'rgba(0, 0, 0, 0.8)',color:'#fff',maxWidth:'300px',fontSize:'10px',zIndex:9,pointerEvents:'none'};var Map=/*#__PURE__*/function(_React$Component){_inherits(Map,_React$Component);function Map(){var _getPrototypeOf2;var _this;_classCallCheck(this,Map);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Map)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={hover:{x:0,y:0,hoveredObject:null},settings:Object.keys(SCATTERPLOT_CONTROLS).reduce(function(accu,key){return _objectSpread({},accu,_defineProperty({},key,SCATTERPLOT_CONTROLS[key].value));},{}),points:[]};_this._onHover=function(_ref){var x=_ref.x,y=_ref.y,object=_ref.object;var properties=object?object.properties:null;if(object){_this.setState({hover:{x:object.geometry.coordinates[0],y:object.geometry.coordinates[1],hoveredObject:properties}});}};return _this;}_createClass(Map,[{key:\"componentDidMount\",value:function componentDidMount(){this._processData();}},{key:\"_processData\",value:function _processData(){var points=geoJsonData.features;console.log(points);this.setState({points:points});}},{key:\"_renderTooltip\",value:function _renderTooltip(left){var hover=this.state.hover;return hover.hoveredObject&&React.createElement(\"div\",{style:{position:'absolute',zIndex:1,pointerEvents:'none',padding:'8px',background:'rgba(0, 0, 0, 0.8)',color:'#fff',fontSize:'15px',left:left,top:\"7.3%\"}},React.createElement(\"div\",null,React.createElement(\"b\",null,\"Cluster\")),React.createElement(\"div\",null,React.createElement(\"div\",null,hover.hoveredObject.cluster)),React.createElement(\"div\",null,React.createElement(\"b\",null,\"Name\")),React.createElement(\"div\",null,hover.hoveredObject.Name),React.createElement(\"div\",null,React.createElement(\"b\",null,\"Location\")),React.createElement(\"div\",null,hover.hoveredObject.Address));}},{key:\"_updateLayerSettings\",value:function _updateLayerSettings(settings){this.setState({settings:settings});}},{key:\"_renderLayers\",value:function _renderLayers(){var data=this.state.points;var settings=this.state.settings;return[// only needed when using shadows - a plane for shadows to drop on\n// new PolygonLayer({\n//   id: 'polygon-layer',\n//   precinctCoord,\n//   pickable: true,\n//   stroked: true,\n//   filled: true,\n//   wireframe: true,\n//   lineWidthMinPixels: 1,\n//   getPolygon: d => d,\n//   getLineColor: [80, 80, 80],\n//   getFillColor: [80, 80, 80],\n//   getLineWidth: 250,\n// }),\nnew ScatterplotLayer(_objectSpread({id:'scatterplot',getPosition:function getPosition(d){return d.geometry.coordinates;},getColor:function getColor(d){return COLOR_SCALE(d.properties.cluster);},getRadius:function getRadius(d){return 5;},opacity:0.9,pickable:true,radiusMinPixels:0.25,radiusMaxPixels:30,data:data,onHover:this._onHover},settings)),new GeoJsonLayer({id:'geojson-layer',data:Precinct,opacity:0.1,pickable:false,stroked:false,filled:true,extruded:true,lineWidthScale:200,lineWidthMinPixels:2,getFillColor:[160,160,180,200],getLineColor:[127,205,187],getRadius:100,getLineWidth:100,getElevation:30// onHover: this._onHover\n})];}},{key:\"render\",value:function render(){var _this2=this;var left=\"0%\";if(this.props.display===false){left=\"20%\";}var hover=this.state.hover;console.log(hover);console.log(hover.hoveredObject);return React.createElement(React.Fragment,null,React.createElement(LayerControls,{settings:this.state.settings,propTypes:SCATTERPLOT_CONTROLS,onChange:function onChange(settings){return _this2._updateLayerSettings(settings);}}),React.createElement(DeckGL,{layers:this._renderLayers(),initialViewState:initialViewState,style:{top:\"7.3%\",left:left},views:new MapView({height:'100%',width:'100%',clear:true,controller:true})},React.createElement(StaticMap,{style:{top:\"7.3%\",left:left},reuseMaps:true,mapStyle:mapStyle,preventStyleDiffing:true,mapboxApiAccessToken:MAPBOX_ACCESS_TOKEN}),this._renderTooltip(left)));}}]);return Map;}(React.Component);export default Map;","map":{"version":3,"sources":["/Users/ucheuba/Downloads/backend/frontend/FP_Frontend/src/Components/Map/Map.js"],"names":["React","DeckGL","LineLayer","GeoJsonLayer","ScatterplotLayer","PolygonLayer","StaticMap","ReactMapGL","MapView","View","scaleThreshold","LayerControls","SCATTERPLOT_CONTROLS","Precinct","MAPBOX_ACCESS_TOKEN","mapStyle","DATA_URL","COLOR_SCALE","domain","range","initialViewState","latitude","longitude","zoom","pitch","bearing","geoJsonData","tooltipStyle","position","padding","background","color","maxWidth","fontSize","zIndex","pointerEvents","Map","state","hover","x","y","hoveredObject","settings","Object","keys","reduce","accu","key","value","points","_onHover","object","properties","setState","geometry","coordinates","_processData","features","console","log","left","top","cluster","Name","Address","data","id","getPosition","d","getColor","getRadius","opacity","pickable","radiusMinPixels","radiusMaxPixels","onHover","stroked","filled","extruded","lineWidthScale","lineWidthMinPixels","getFillColor","getLineColor","getLineWidth","getElevation","props","display","_updateLayerSettings","_renderLayers","height","width","clear","controller","_renderTooltip","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport DeckGL from '@deck.gl/react';\nimport {LineLayer, GeoJsonLayer, ScatterplotLayer, PolygonLayer} from '@deck.gl/layers';\nimport {StaticMap} from \"react-map-gl\";\nimport ReactMapGL from \"react-map-gl\";\nimport {MapView, View} from '@deck.gl/core';\nimport {scaleThreshold} from 'd3-scale';     // github example\nimport \"./Map.css\"\nimport { LayerControls, SCATTERPLOT_CONTROLS } from './controls';\nimport Precinct from '../../precinct.json'\n\n\nconst MAPBOX_ACCESS_TOKEN= 'pk.eyJ1IjoidWJhY2hyaXMiLCJhIjoiY2sxYjczdWhpMGZuMzNjb2I5OGlqb3gwaCJ9.iLrtxaVXfhsJM0iyWwdQ5Q'\nconst mapStyle=\"mapbox://styles/mapbox/outdoors-v11\"\n\n// Information from the github deckGL geoGSON example \nconst DATA_URL = 'https://raw.githubusercontent.com/uber-common/deck.gl-data/master/examples/geojson/vancouver-blocks.json'; // eslint-disable-line\n\nexport const COLOR_SCALE = scaleThreshold()\n  .domain([-0.6, -0.45, -0.3, -0.15, 0, 0.15, 0.3, 0.45, 0.6, 0.75, 0.9, 1.05, 1.2])\n  .range([\n    [65, 182, 196],\n    [127, 205, 187],\n    [199, 233, 180],\n    [237, 248, 177],\n    // zero\n    [255, 255, 204],\n    [255, 237, 160],\n    [254, 217, 118],\n    [254, 178, 76],\n    [253, 141, 60],\n    [252, 78, 42],\n    [227, 26, 28],\n    [189, 0, 38],\n    [128, 0, 38]\n  ]);\n\n// end of info \n\nconst initialViewState = {\n    // latitude: 49.254,\n    // longitude: -123.13,\n    latitude: 32.92,   //SAN DIEGO\n    longitude: -117.135,\n    zoom: 14,\n    pitch: 0,\n    bearing: 0\n};\n\n\n// console.log(precinctData)\n\nconst geoJsonData = {\"type\": \"FeatureCollection\", \"features\": [\n  {\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.131861, 32.920173]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 3, \"Address\": \"8990 BRENTFORD AVE\", \"Name\": \"Lavinnia  Sweigart\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.133607, 32.920137]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 4, \"Address\": \"8880 BRENTFORD AVE\", \"Name\": \"Mercedese Irmgard Thero\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.132555, 32.920159]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 1, \"Address\": \"8950 BRENTFORD AVE\", \"Name\": \"Denkevitz  Rener\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.132507, 32.920452]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 1, \"Address\": \"8969 LIBRA DR\", \"Name\": \"Assent  Gantvoort\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.132834, 32.920445]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 1, \"Address\": \"8953 LIBRA DR\", \"Name\": \"Keuna  Malmgren\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.13517, 32.920105]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 0, \"Address\": \"8776 BRENTFORD AVE\", \"Name\": \"Jimyah  Wokwicz\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.133653, 32.920426]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 4, \"Address\": \"8921 LIBRA DR\", \"Name\": \"Cannette  Mahalick\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.134128, 32.920126]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 2, \"Address\": \"8850 BRENTFORD AVE\", \"Name\": \"Liliya  Rallison\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.13267, 32.920449]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 1, \"Address\": \"8961 LIBRA DR\", \"Name\": \"Fugate  Standerwick\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.133607, 32.920137]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 4, \"Address\": \"8880 BRENTFORD AVE\", \"Name\": \"Yeicob  Domingues\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.135138, 32.920393]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 0, \"Address\": \"8777 LIBRA DR\", \"Name\": \"Nayya  Drouillard\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.134475, 32.920407]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 5, \"Address\": \"8845 LIBRA DR\", \"Name\": \"Tammeka  Piazza\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.133953, 32.920131]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 2, \"Address\": \"8860 BRENTFORD AVE\", \"Name\": \"Quintoria  Reigle\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.135002, 32.920108]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 0, \"Address\": \"8786 BRENTFORD AVE\", \"Name\": \"D\\u017eemila  Denny\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.13267, 32.920449]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 1, \"Address\": \"8961 LIBRA DR\", \"Name\": \"Erlon  Willison\", \"zipcode\": 130960}}\n  ,{\"geometry\": {\"type\": \"Point\", \"coordinates\": [-117.133256, 32.920144]}, \"type\": \"Feature\", \"properties\": {\"cluster\": 6, \"Address\": \"8910 BRENTFORD AVE\", \"Name\": \"Vedvit  Swerdlow\", \"zipcode\": 130960}}\n  ]}\n\nconst tooltipStyle = {\n  position: 'absolute',\n  padding: '4px',\n  background: 'rgba(0, 0, 0, 0.8)',\n  color: '#fff',\n  maxWidth: '300px',\n  fontSize: '10px',\n  zIndex: 9,\n  pointerEvents: 'none'\n};\n\n\nclass Map extends React.Component {\n\n    state = {\n      hover: {\n        x:0,\n        y:0,\n        hoveredObject: null\n      },\n      settings: Object.keys(SCATTERPLOT_CONTROLS).reduce(\n        (accu, key) => ({\n          ...accu,\n          [key]: SCATTERPLOT_CONTROLS[key].value\n        }),\n        {}\n      ),\n      points: [],\n    }\n\n    componentDidMount() {\n      this._processData();\n    }\n\n    _processData() {\n      const points = geoJsonData.features;\n      console.log(points);\n      this.setState({points})\n    }\n\n    _onHover = ({ x, y, object }) => {\n      const properties = object ? object.properties : null;\n      \n      if(object){\n        this.setState({\n          hover: { \n           x: object.geometry.coordinates[0],\n           y: object.geometry.coordinates[1],\n           hoveredObject: properties\n          } \n       });\n      }\n      \n    }\n\n    _renderTooltip(left) {\n      const {hover} = this.state\n      return hover.hoveredObject && (\n        <div style={{position: 'absolute',\n         zIndex: 1, \n         pointerEvents: 'none',\n         padding: '8px',\n         background: 'rgba(0, 0, 0, 0.8)',\n         color: '#fff', \n         fontSize: '15px',\n         left: left, top: \"7.3%\"}}>\n          <div>\n              <b>Cluster</b>\n              </div>\n              <div>\n                <div>{hover.hoveredObject.cluster}</div>\n              </div>\n              <div>\n                <b>Name</b>\n              </div>\n              <div>{hover.hoveredObject.Name}</div>\n              <div>\n                <b>Location</b>\n              </div>\n              <div>{hover.hoveredObject.Address}</div>\n        </div>\n      );\n    }\n\n    _updateLayerSettings(settings){\n      this.setState({settings});\n    }\n\n\n    _renderLayers() {\n      const data = this.state.points;\n      const settings = this.state.settings\n      \n\n      return [\n        // only needed when using shadows - a plane for shadows to drop on\n        // new PolygonLayer({\n        //   id: 'polygon-layer',\n        //   precinctCoord,\n        //   pickable: true,\n        //   stroked: true,\n        //   filled: true,\n        //   wireframe: true,\n        //   lineWidthMinPixels: 1,\n        //   getPolygon: d => d,\n        //   getLineColor: [80, 80, 80],\n        //   getFillColor: [80, 80, 80],\n        //   getLineWidth: 250,\n        // }),\n        new ScatterplotLayer({\n          id: 'scatterplot',\n          getPosition: d => d.geometry.coordinates,\n          getColor: d => COLOR_SCALE(d.properties.cluster),\n          getRadius: d => 5,\n          opacity: 0.9,\n          pickable: true,\n          radiusMinPixels: 0.25,\n          radiusMaxPixels: 30,\n          data,\n          onHover: this._onHover,\n          ...settings\n        }),\n        new GeoJsonLayer({\n          id: 'geojson-layer',\n          data: Precinct,\n          opacity: 0.1,\n          pickable: false,\n          stroked: false,\n          filled: true,\n          extruded: true,\n          lineWidthScale: 200,\n          lineWidthMinPixels: 2,\n          getFillColor: [160, 160, 180, 200],\n          getLineColor: [127, 205, 187],\n          getRadius: 100,\n          getLineWidth: 100,\n          getElevation: 30,\n          // onHover: this._onHover\n        }),\n      ];\n    }\n\n    render() {\n      let left = \"0%\"\n      if(this.props.display === false){\n        left = \"20%\"\n      }\n      const {hover} = this.state\n      console.log(hover)\n      console.log(hover.hoveredObject);\n    \n        return (   \n          <>\n            <LayerControls\n            settings={this.state.settings}\n            propTypes={SCATTERPLOT_CONTROLS}\n            onChange={settings => this._updateLayerSettings(settings)}\n            />\n            <DeckGL\n            layers={this._renderLayers()}\n            initialViewState={initialViewState}\n            style={{top:\"7.3%\", left:left}}\n            views={ new MapView({\n                height: '100%',\n                width: '100%',\n                clear: true,\n                controller: true\n            })}\n            >\n              <StaticMap\n              style={{top:\"7.3%\", left:left}}\n              reuseMaps\n              mapStyle={mapStyle}\n              preventStyleDiffing={true}\n              mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN}\n              />\n              { this._renderTooltip(left) }\n            </DeckGL>\n          </>\n\n          );\n    }\n}\n\nexport default Map;"]},"metadata":{},"sourceType":"module"}