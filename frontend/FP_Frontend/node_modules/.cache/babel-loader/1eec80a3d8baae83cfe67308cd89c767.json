{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport default function unpackJsonArrays(json, buffers) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return unpackJsonArraysRecursive(json, json, buffers, options);\n}\n\nfunction unpackJsonArraysRecursive(json, topJson, buffers) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var object = json;\n  var buffer = decodeJSONPointer(object, buffers);\n\n  if (buffer) {\n    return buffer;\n  }\n\n  if (Array.isArray(object)) {\n    return object.map(function (element) {\n      return unpackJsonArraysRecursive(element, topJson, buffers, options);\n    });\n  }\n\n  if (object !== null && _typeof(object) === 'object') {\n    var newObject = {};\n\n    for (var key in object) {\n      newObject[key] = unpackJsonArraysRecursive(object[key], topJson, buffers, options);\n    }\n\n    return newObject;\n  }\n\n  return object;\n}\n\nfunction decodeJSONPointer(object, buffers) {\n  var pointer = parseJSONPointer(object);\n\n  if (pointer) {\n    var _pointer = _slicedToArray(pointer, 2),\n        field = _pointer[0],\n        index = _pointer[1];\n\n    var buffer = buffers[field] && buffers[field][index];\n\n    if (buffer) {\n      return buffer;\n    }\n\n    console.error(\"Invalid JSON pointer \".concat(object, \": #/\").concat(field, \"/\").concat(index));\n  }\n\n  return null;\n}\n\nfunction parseJSONPointer(value) {\n  if (typeof value === 'string') {\n    if (value.indexOf('##/') === 0) {\n      return value.slice(1);\n    }\n\n    var matches = value.match(/#\\/([a-z]+)\\/([0-9]+)/);\n\n    if (matches) {\n      var index = parseInt(matches[2], 10);\n      return [matches[1], index];\n    }\n\n    matches = value.match(/\\$\\$\\$([0-9]+)/);\n\n    if (matches) {\n      var _index = parseInt(matches[1], 10);\n\n      return ['accessors', _index];\n    }\n  }\n\n  return null;\n}","map":null,"metadata":{},"sourceType":"module"}